<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Meta Pixel Code -->
    <script>
        ! function(f, b, e, v, n, t, s) {
            if (f.fbq) return;
            n = f.fbq = function() {
                n.callMethod ?
                    n.callMethod.apply(n, arguments) : n.queue.push(arguments)
            };
            if (!f._fbq) f._fbq = n;
            n.push = n;
            n.loaded = !0;
            n.version = '2.0';
            n.queue = [];
            t = b.createElement(e);
            t.async = !0;
            t.src = v;
            s = b.getElementsByTagName(e)[0];
            s.parentNode.insertBefore(t, s)
        }(window, document, 'script',
            'https://connect.facebook.net/en_US/fbevents.js');
        fbq('init', '273136652390155');
        fbq('track', 'PageView');

    </script>
    <noscript><img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=273136652390155&ev=PageView&noscript=1" /></noscript>
    <!-- End Meta Pixel Code -->
    <title>iOS Notification - Neumorphism</title>
    <style>
        :root {
            --glass-bg: rgba(255, 255, 255, 0.72);
            --glass-stroke: rgba(255, 255, 255, 0.35);
            --text: rgba(0, 0, 0, 0.92);
            --subtext: rgba(60, 60, 67, 0.8);
            --divider: rgba(60, 60, 67, 0.18);
            --blue: #0A84FF;
        }

        body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100vh;
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Helvetica Neue", Arial, sans-serif;

            /* фон, чтобы blur реально был виден */
            background:
                radial-gradient(1200px 800px at 10% 20%, rgba(10, 132, 255, 0.22), transparent 60%),
                radial-gradient(900px 700px at 90% 10%, rgba(255, 45, 85, 0.18), transparent 55%),
                radial-gradient(900px 700px at 40% 90%, rgba(52, 199, 89, 0.16), transparent 60%),
                linear-gradient(180deg, #f2f2f7 0%, #e9e9ef 100%);

            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        /* лёгкая зернистость как у iOS */
        body::before {
            content: "";
            position: fixed;
            inset: 0;
            pointer-events: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='260' height='260'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.8' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='260' height='260' filter='url(%23n)' opacity='.12'/%3E%3C/svg%3E");
            mix-blend-mode: overlay;
            opacity: .25;
        }

        .notification {
            width: 340px;
            border-radius: 22px;
            padding: 18px 18px 16px;

            /* iOS glass */
            background: var(--glass-bg);
            -webkit-backdrop-filter: blur(24px) saturate(180%);
            backdrop-filter: blur(24px) saturate(180%);

            border: 1px solid var(--glass-stroke);

            /* system-like shadow */
            box-shadow:
                0 18px 40px rgba(0, 0, 0, 0.22),
                0 2px 10px rgba(0, 0, 0, 0.10);

            transform: scale(0.98);
            opacity: 0;
            animation: popIn 240ms cubic-bezier(.2, .9, .2, 1) forwards;
        }

        .notificationHeader {
            font-size: 13px;
            color: var(--subtext);
            text-align: center;
            margin-bottom: 10px;
            font-weight: 600;
            letter-spacing: -0.01em;
        }

        .notificationTop {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }

        .notificationTop img {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            /* лёгкий “иконный” бликовый контур */
            box-shadow:
                0 10px 20px rgba(0, 0, 0, 0.14),
                inset 0 0 0 1px rgba(255, 255, 255, 0.35);
        }

        .title {
            font-size: 24px;
            font-weight: 700;
            color: var(--text);
            letter-spacing: -0.02em;
        }

        .message {
            font-size: 15.5px;
            color: var(--subtext);
            line-height: 1.35;
            margin: 0 2px 14px;
            letter-spacing: -0.01em;
        }

        .timer {
            font-size: 16px;
            font-weight: 600;
            text-align: center;
            margin: 0 0 14px;
            color: var(--blue);
        }

        .howto {
            font-size: 18px;
            font-weight: 700;
            margin: 0 2px 8px;
            color: var(--text);
            letter-spacing: -0.01em;
            text-align: center;
        }

        .steps {
            font-size: 14.8px;
            line-height: 1.45;
            color: var(--subtext);
            margin: 0 2px 16px;
        }

        /* iOS-style actions container (как в алерте) */
        .buttons {
            display: grid;
            gap: 10px;
            margin-top: 6px;
            padding-top: 14px;
            border-top: 1px solid var(--divider);
        }

        /* “primary” iOS button (works for <a> and <div>) */
        .button {
            -webkit-tap-highlight-color: transparent;
            user-select: none;

            /* делаем ссылку полноценной кнопкой */
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;

            text-decoration: none;
            /* УБРАТЬ ПОДЧЁРКИВАНИЕ */
            color: #fff;

            background: var(--blue);
            font-size: 17px;
            font-weight: 700;
            padding: 14px 0;
            border-radius: 999px;
            cursor: pointer;

            transition: transform 0.08s ease, filter 0.2s ease;
        }

        /* чтобы ссылка не меняла цвет после клика */
        .button:visited {
            color: #fff;
        }

        .button:hover {
            filter: brightness(0.96);
        }

        .button:active {
            transform: scale(0.985);
        }

        /* secondary glass button */
        .button.secondary {
            background: rgba(255, 255, 255, 0.45);
            color: var(--text);
            text-decoration: none;

            -webkit-backdrop-filter: blur(14px) saturate(180%);
            backdrop-filter: blur(14px) saturate(180%);

            box-shadow:
                0 10px 22px rgba(0, 0, 0, 0.10),
                inset 0 0 0 1px rgba(255, 255, 255, 0.45);
        }

        /* короткая системная анимация */
        @keyframes popIn {
            to {
                transform: scale(1);
                opacity: 1;
            }
        }

    </style>
</head>

<body>
    <div class="notification" id="notification">

        <div class="notificationTop">
            <img src="assets/settings.svg" alt="Settings">
            <div class="title">Your <span id="deviceName">device</span> memory is full</div>
        </div>

        <div class="message">
            There is almost not enough available storage to take photos and videos,
            download files, install and update apps. Clean up storage fast.
        </div>

        <div class="timer" id="timer">1 minute 30 seconds</div>

        <div class="howto">How to clean storage:</div>
        <div class="steps">
            Step 1: Tap the "Clean Memory" button below <br>
            Step 2: You will be redirected to the App Store <br>
            Step 3: Install Cleaner MAX app and clean your <span id="deviceName2">device</span>
        </div>

        <a class="button cleanMemory" href="https://apps.apple.com/by/app/cleaner-max-clean-photos/id6452720984">
            Clean Memory
        </a>
    </div>

    <script>
        window.onload = () => {
            const notif = document.getElementById("notification");
            const timerEl = document.getElementById("timer");

            let total = 90; // 1:30
            const interval = setInterval(() => {
                total--;
                const min = Math.floor(total / 60);
                const sec = total % 60;
                timerEl.textContent = `${min} minute ${sec.toString().padStart(2, "0")} seconds`;
                if (total <= 0) {
                    clearInterval(interval);
                    timerEl.textContent = "0 minute 00 seconds";
                }
                // от синего к красному
                const ratio = 1 - (total / 90);
                const r = Math.floor(10 + (214 - 10) * ratio);
                const g = Math.floor(132 - 132 * ratio);
                const b = Math.floor(255 - 255 * ratio);
                timerEl.style.color = `rgb(${r},${g},${b})`;
            }, 1000);

            function playNotification() {
                notif.style.animation = "none";
                notif.offsetHeight;
                notif.style.animation = "popIn 0.8s ease forwards";
            }

            playNotification();
            setInterval(playNotification, 3500);
        };

        function detectDevice() {
            const ua = navigator.userAgent;

            if (/iPhone/.test(ua)) return "iPhone";
            if (/iPad/.test(ua)) return "iPad";
            if (/Android/.test(ua)) return "Android device";
            if (/Mac/.test(ua)) return "Mac";
            if (/Windows/.test(ua)) return "PC";

            return "device";
        }

        const device = detectDevice();

        document.getElementById("deviceName").textContent = device;
        document.getElementById("deviceName2").textContent = device;

        // клик только по кнопке Clean Memory

        document.querySelector('.cleanMemory')?.addEventListener('click', (e) => {
                    const url = e.currentTarget.href;

                    // Если fbq доступен — даём ему 300-500мс
                    if (typeof window.fbq === 'function') {
                        e.preventDefault();

                        window.fbq('track', 'Lead', {
                            button_name: 'cleanMemory'
                        });

                        setTimeout(() => {
                            window.location.href = url;
                        }, 400);

                        return;
                    }

                    // Если fbq недоступен — НЕ мешаем ссылке работать
                    // (ничего не делаем, браузер сам перейдёт по href)

    </script>
</body>

</html>
